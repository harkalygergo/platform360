{% extends 'base.html.twig' %}

{% block title %}Hello PlatformController!{% endblock %}

{% block body %}
<nav class="bg-black text-white">
    <div class="d-flex flex-column flex-shrink-0 h-100">
        <a href="/"
           class="d-block py-1 text-center text-decoration-none border-bottom"
           data-bs-toggle="tooltip"
           data-bs-placement="right"
           data-bs-original-title="Icon-only">
            <span class="fs-1">⫹⫺</span>
            <br><small class="fw-bold text-uppercase">platform</small>
            <span class="visually-hidden">Icon-only</span> </a>
        <ul class="nav nav-pills nav-flush flex-column mb-auto text-center">
            <li class="nav-item border-bottom">
                <a href="#" class="nav-link link-body-emphasis text-secondary fw-bold" title="admin">
                    <i class="bi bi-speedometer2 fs-4"></i>
                    <br><small>ADMIN</small>
                </a>
            </li>
            <li class="nav-item border-bottom">
                <a href="#" class="nav-link link-body-emphasis text-secondary fw-bold" title="Content Management System">
                    <i class="bi bi-globe fs-3 p-0 m-0"></i>
                    <br><small>WEB</small>
                </a>
            </li>
            <li class="nav-item border-bottom">
                <a href="#" class="nav-link link-body-emphasis text-secondary fw-bold" title="Customer Relationship Management">
                    <i class="bi bi-people fs-3 p-0 m-0"></i>
                    <br><small>CRM</small>
                </a>
            </li>
            <li class="nav-item border-bottom">
                <a href="#" class="nav-link link-body-emphasis text-secondary fw-bold" title="E-commerce">
                    <i class="bi bi-cart fs-3 p-0 m-0"></i>
                    <br><small>ECOM</small>
                </a>
            </li>
            <li class="nav-item border-bottom">
                <a href="#" class="nav-link link-body-emphasis text-secondary fw-bold" title="Enterprise Resource Planning">
                    <i class="bi bi-briefcase fs-3 p-0 m-0"></i>
                    <br><small>ERP</small>
                </a>
            </li>
            <li class="nav-item border-bottom">
                <a href="#" class="nav-link link-body-emphasis text-secondary fw-bold" title="Analytics">
                    <i class="bi bi-graph-up fs-3 p-0 m-0"></i>
                    <br><small>ANALYTICS</small>
                </a>
            </li>
            <li class="nav-item border-bottom">
                <a href="#" class="nav-link link-body-emphasis text-secondary fw-bold" title="tools">
                    <i class="bi bi-tools fs-3 p-0 m-0"></i>
                    <br><small>TOOLS</small>
                </a>
            </li>
            <li class="nav-item border-bottom">
                <a href="#" class="nav-link link-body-emphasis text-secondary fw-bold" title="settings">
                    <i class="bi bi-gear fs-3 p-0 m-0"></i>
                    <br><small>SETTINGS</small>
                </a>
            </li>
        </ul>
        <div class="border-top">
            <button class="btn btn-sm btn-outline-secondary" id="themeToggle" type="button" aria-label="Toggle theme" title="Toggle light/dark">
                <i class="bi bi-sun-fill" id="themeIcon"></i>
            </button>
            <a href="#" class="d-flex align-items-center justify-content-center p-3 link-body-emphasis text-decoration-none">
                <i class="bi bi-question-circle text-secondary p-0 m-0 fs-5"></i>
            </a>
        </div>
    </div>
</nav>

<aside id="app-aside" class="h-100">
    <div class="flex-shrink-0 p-3" style="width: 280px;">
        <a href="/" class="d-flex align-items-center link-white text-decoration-none">
            <span class="fs-5 fw-semibold">platformBMS</span>
        </a>
        <select class="">
            <option value="en">English</option>
            <option value="es">Español</option>
            <option value="fr">Français</option>
            <option value="new">+ új instance létrehozása</option>
        </select>
        <hr>
        <ul class="list-unstyled ps-0">
            <li class="mb-1"> <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle="collapse" data-bs-target="#home-collapse" aria-expanded="true">
                    Home
                </button> <div class="collapse show" id="home-collapse"> <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"> <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Overview</a></li> <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Updates</a></li> <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Reports</a></li> </ul> </div> </li> <li class="mb-1"> <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle="collapse" data-bs-target="#dashboard-collapse" aria-expanded="false">
                    Dashboard
                </button> <div class="collapse" id="dashboard-collapse"> <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"> <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Overview</a></li> <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Weekly</a></li> <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Monthly</a></li> <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Annually</a></li> </ul> </div> </li> <li class="mb-1"> <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle="collapse" data-bs-target="#orders-collapse" aria-expanded="false">
                    Orders
                </button> <div class="collapse" id="orders-collapse"> <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"> <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">New</a></li> <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Processed</a></li> <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Shipped</a></li> <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Returned</a></li> </ul> </div> </li> <li class="border-top my-3"></li> <li class="mb-1"> <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle="collapse" data-bs-target="#account-collapse" aria-expanded="false">
                    Account
                </button> <div class="collapse" id="account-collapse"> <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"> <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">New...</a></li> <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Profile</a></li> <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Settings</a></li> <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Sign out</a></li> </ul> </div> </li> </ul> </div>
</aside>

<main class="bg-light text-start flex-grow-1 text-dark">
    <header class="bg-dark text-white p-2">
        <!-- Make the list icon an accessible toggle for the aside -->
        <i id="asideToggle" class="bi bi-list border rounded-2" style="cursor:pointer" role="button" tabindex="0" aria-controls="app-aside" aria-expanded="true" aria-label="Toggle sidebar"></i> PLATFORM V2
    </header>
    <section class="bg-light text-dark p-3">
        <h1 class="fw-bold pb-0 mb-0">Dashboard</h1>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item fs-6"><a href="#"><small>Home</small></a></li>
                <li class="breadcrumb-item"><a href="#"><small>Management</small></a></li>
                <li class="breadcrumb-item active"><small>Dashboard</small></li>
            </ol>
        </nav>

        {% if app.user %}
            <p class="text-success">You are logged in as {{ app.user.email }}.</p>
        {% else %}
            <p class="text-danger">You are not logged in.</p>
        {% endif %}

    </section>
</main>

<!-- Lightweight inline script to toggle the aside visibility -->
<script>
    // function to light or dark template
    function toggleTheme() {
        const current = document.documentElement.getAttribute('data-bs-theme') || 'light';
        const next = current === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-bs-theme', next);
        localStorage.setItem('theme', next);
        updateThemeIcons(next);
    }
    function updateThemeIcons(theme) {
        const sun = 'bi-sun-fill';
        const moon = 'bi-moon-stars-fill';
        const headerIcon = document.getElementById('themeIconHeader');
        const sideIcon = document.getElementById('themeIcon');
        if (headerIcon) headerIcon.className = 'bi ' + (theme === 'dark' ? sun : moon);
        if (sideIcon) sideIcon.className = theme === 'dark' ? 'bi bi-sun-fill' : 'bi bi-moon-stars-fill';
    }
    document.getElementById('themeToggle')?.addEventListener('click', toggleTheme);
    document.getElementById('themeToggleHeader')?.addEventListener('click', toggleTheme);

    (function () {
        const toggle = document.getElementById('asideToggle');
        const aside = document.getElementById('app-aside') || document.querySelector('aside');
        if (!toggle || !aside) return;

        function handleToggle() {
            const isHidden = aside.classList.toggle('d-none');
            toggle.setAttribute('aria-expanded', String(!isHidden));
        }

        toggle.addEventListener('click', handleToggle);
        toggle.addEventListener('keydown', function (e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                handleToggle();
            }
        });
    })();
</script>

{% endblock %}
